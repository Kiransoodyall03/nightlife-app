// User table stores basic user information and group association
// Users can optionally belong to a group (group_id can be null)
TABLE user {
  user_id integer [increment, not null, primary key]  // Unique identifier for each user
  user_authentication_key varchar(64) [not null]      // Authentication key for user login/security
  user_name varchar(16) [not null]                    // Display name for the user
  group_id integer [default: null]                    // Optional reference to a group the user belongs to
}

// Group table stores information about groups that users can join
// Groups allow multiple users to swipe and make decisions together
TABLE group {
  group_id integer [increment, not null, primary key] // Unique identifier for each group
  group_name varchar(16) [not null]                   // Display name for the group
  group_code varchar(7) [not null]                    // Unique code for users to join the group
}

// Filter table stores location preferences for both users and groups
// Each filter record belongs to either a user OR a group (one must be null)
TABLE filter {
  filter_id integer [increment, not null, primary key]        // Unique identifier for each filter set
  user_id integer [default: null]                            // Reference to user if it's a user filter
  group_id integer [default: null]                           // Reference to group if it's a group filter
  preferred_location_types varchar(255) [default: null]       // Comma-separated list of preferred venue types
  max_distance integer [default: 10]                         // Maximum distance willing to travel
  price_range varchar(10) [default: 'medium']                // Preferred price range for venues
  created_at timestamp                                       // When the filter was created
  updated_at timestamp                                       // When the filter was last modified
}

// User_setting table stores UI preferences for individual users
// Separated from filters to keep display preferences independent
TABLE user_setting {
  user_setting_id integer [increment, not null, primary key] // Unique identifier for each settings record
  user_id integer [not null]                                // Reference to the user these settings belong to
  dark_mode boolean [default: false]                        // User's dark/light mode preference
  font_size varchar(10) [default: 'medium']                 // User's preferred font size
  theme_color varchar(16) [default: 'blue']                 // User's preferred UI theme color
}

// Location table stores information about venues that can be swiped on
TABLE location {
  location_id integer [increment, not null, primary key]     // Unique identifier for each location
  location_name varchar(64) [not null]                       // Name of the venue
  location_type varchar(16) [not null]                       // Type of venue (restaurant, bar, etc.)
  location_address varchar(128) [not null]                   // Physical address of the venue
  price_range varchar(10) [default: 'medium']                // Price range of the venue
  distance_from_user integer [default: 5]                    // Distance from user's current location
}

// Swipe table records all swipe actions made by users
// Tracks both individual and group-context swipes
TABLE swipe {
  swipe_id integer [increment, not null, primary key]        // Unique identifier for each swipe
  user_id integer [not null]                                 // User who made the swipe
  location_id integer [not null]                             // Location that was swiped on
  swipe_action varchar(10) [not null]                        // Type of swipe (left/right)
  group_id integer [default: null]                           // Group context if swiping as part of group
  swipe_timestamp timestamp                                  // When the swipe occurred
}

// Group_decision table records final decisions made by groups
// Represents the collective decision after group members have swiped
TABLE group_decision {
  group_decision_id integer [increment, not null, primary key] // Unique identifier for each group decision
  group_id integer [not null]                                  // Group that made the decision
  location_id integer [not null]                               // Location that was decided on
  decision_timestamp timestamp                                 // When the decision was made
}

// Reference relationships between tables
// These ensure referential integrity in the database
Ref: "group_decision"."group_id" < "group"."group_id"          // Group decisions belong to a group
Ref: "group_decision"."location_id" < "location"."location_id" // Group decisions reference a location
Ref: "swipe"."user_id" < "user"."user_id"                     // Swipes are made by a user
Ref: "swipe"."location_id" < "location"."location_id"         // Swipes reference a location
Ref: "swipe"."group_id" < "group"."group_id"                  // Swipes can be associated with a group
Ref: "user"."group_id" < "group"."group_id"                   // Users can belong to a group
Ref: "user_setting"."user_id" < "user"."user_id"              // Settings belong to a user
Ref: "filter"."user_id" < "user"."user_id"                    // Filters can belong to a user
Ref: "filter"."group_id" < "group"."group_id"                 // Filters can belong to a group